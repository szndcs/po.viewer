class poClass extends Function{constructor(e){super("...args","return this.__self__.__call__(...args)");var b=this.bind(this);this.__self__=b;b.version="3.0.0";b.poImages=[];b.poGalleries=[];if("undefined"===typeof e)this.error("poData object is undefined.");else return console.log(`${(new Date).toUTCString()} > po.viewer ${b.version} init ...`),0>=document.querySelectorAll("div.po-gallery").length&&this.error("div with po-gallery class does not exist."),"undefined"!==typeof e.galleries?e.galleries.forEach((a,
g)=>{a.thumbnailSize="undefined"!==typeof a.thumbnailSize||!isNaN(a.thumbnailSize)||5<a.thumbnailSize?"one one two three four five six".split(" ")[a.thumbnailSize]:"three";a.thumbnailSize="undefined"!==typeof a.cardMode&&!0===a.cardMode||"true"===a.cardMode?"eight":a.thumbnailSize;a.thumbnailRounded="undefined"!==typeof a.thumbnailRounded&&!0===a.thumbnailRounded||"true"===a.thumbnailRounded?"rounded":"";a.galleryImageSkeleton="undefined"===typeof a.thumbnailWithDescription||!1===a.thumbnailWithDescription||
"false"===a.thumbnailWithDescription?'<img src="%THUMBNAIL%" class="ui %ROUNDED% fluid image po-thumbnail" data-gallery="%GALLERY%" data-index="%INDEX%">':'<figure>\n<img src="%THUMBNAIL%" class="ui %ROUNDED% fluid image po-thumbnail" data-gallery="%GALLERY%" data-index="%INDEX%">\n<figcaption>%DESCRIPTION%</figcaption>\n</figure>';a.galleryImageSkeleton="undefined"!==typeof a.cardMode&&!0===a.cardMode||"true"===a.cardMode?'<div class="ui fluid card">\n<div class="image">\n<img src="%THUMBNAIL%" class="po-thumbnail" data-gallery="%GALLERY%" data-index="%INDEX%">\n</div>\n<div class="content">\n<span class="ui large text">%DESCRIPTION%</span></div>\n</div>':
a.galleryImageSkeleton;a.centeredThumbnails="undefined"===typeof a.centeredThumbnails||!1===a.centeredThumbnails||"false"===a.centeredThumbnails?"":"centered";b.poGalleries[a.id]=[a];document.getElementById(a.id)||this.error("div with specified id ("+a.id+") does not exist.");$(`#${a.id}`).append(`<div class="ui middle aligned ${a.centeredThumbnails} stackable grid"></div>`);"undefined"!==typeof a.images&&a.images.forEach((c,d)=>{let f;"undefined"===typeof c.imageFolder||""===c.imageFolder||"undefined"!==
typeof c.image&&""!==c.image?"undefined"===typeof c.imageFolder||""===c.imageFolder||"undefined"===typeof c.image&&""===c.image?"undefined"!==typeof c.imageFolder&&""!==c.imageFolder||"undefined"===typeof c.image&&""===c.image?f=d="":(d=c.thumbnail.split("/"),d.pop(),d=d.join("/"),f=c.image):(d=c.imageFolder,f=c.image):(d=c.thumbnail.split("/"),f=d.pop(),d=d.join("/"));c.description="undefined"===typeof c.description?"":c.description;c.image=f;c.imageFolder=d;c.gallery="undefined"===typeof a.id?"undefined":
a.id;b.poImages.hasOwnProperty(c.gallery)||(b.poImages[c.gallery]=[]);b.poImages[c.gallery].push(c)})}):this.error("Corrupt poData object."),b.angle=0,b.poPicture={},b.poPage={},this.grabDetails(),b.poSkeleton='<div class="po-frame">\n<div class="po-frame-background"></div>\n<div class="po-frame-icons"><i class="small black times circular inverted icon" id="poCloseIcon"></i><i class="small black arrow left circular inverted icon" id="poPrevIcon"></i><i class="small black arrow right circular inverted icon" id="poNextIcon"></i><i class="small black redo alternate circular inverted icon" id="poRotateRightIcon"></i><i class="small black undo alternate circular inverted icon" id="poRotateLeftIcon"></i></div>\n<div class="po-frame-content"></div>\n</div>',
b.fullsizeImageSkeleton='<figure class="po-fig"><img src="%FOLDER%%IMAGE%" alt="%TEXT%" class="po-picture" data-gallery="%GALLERY%" data-index="%INDEX%"><figcaption>%TEXT%</figcaption></figure>',b.galleryImageTag="",$("body").append(b.poSkeleton),$("body").on("click","#poCloseIcon, .po-picture",()=>{po.close()}),$("#poRotateRightIcon").on("click",()=>{po.rotateR()}),$("#poRotateLeftIcon").on("click",()=>{po.rotateL()}),$("#poPrevIcon").on("click",()=>{po.previous()}),$("#poNextIcon").on("click",()=>
{po.next()}),$(document).on("click",".po-thumbnail",a=>{po.open($(a.target).data("gallery"),$(a.target).data("index"))}),$(window).keydown(function(a){27===a.which&&po.close()}),console.log(" ... init done"),b}create(){for(const [,e]of Object.entries(this.poImages))e.forEach((b,a)=>{let g="undefined"!==typeof b.gallery&&$("#"+b.gallery).length?b.gallery:!1,c;c=!1===g?this.poGalleries[0]:this.poGalleries.hasOwnProperty(b.gallery)?this.poGalleries[b.gallery][0]:this.poGalleries[0];let d='<div class="'+
c.thumbnailSize+' wide column">'+c.galleryImageSkeleton+"</div>";d=d.replace(/%THUMBNAIL%/g,b.thumbnail);d=d.replace(/%INDEX%/g,a);d=d.replace(/%FOLDER%/g,b.imageFolder);d=d.replace(/%FILE%/g,b.image);d=d.replace(/%GALLERY%/g,b.gallery);d=d.replace(/%ROUNDED%/g,c.thumbnailRounded);d=d.replace(/%DESCRIPTION%/g,b.description);!1!==g?$("#"+g+" .grid").append(d):$(".po-gallery:first .grid").append(d)})}open(e="undefined",b=0){this.grabDetails();this.angle=0;let a=this.fullsizeImageSkeleton;a=a.replace(/%FOLDER%/g,
""+this.poImages[e][b].imageFolder+"/");a=a.replace(/%IMAGE%/g,this.poImages[e][b].image);a=a.replace(/%TEXT%/g,this.poImages[e][b].description);a=a.replace(/%INDEX%/g,b);a=a.replace(/%GALLERY%/g,e);$(".po-frame").css("z-index","10000");$(".po-frame-content").css("opacity",0);$(".po-frame-content").html(a);$(".po-frame-content").animate({opacity:1},200);$(".po-frame").animate({opacity:1},600);$("body>*:not(.po-frame)").addClass("po-blured")}rotateL(){this.grabDetails();this.angle-=90;$(".po-fig").css("transform",
"rotate("+this.angle+"deg)");this.resizer(this.poPage,this.poPicture)}rotateR(){this.grabDetails();this.angle+=90;$(".po-fig").css("transform","rotate("+this.angle+"deg)");this.resizer(this.poPage,this.poPicture)}previous(){0>=$(".po-picture").data("index")?po.open($(".po-picture").data("gallery"),this.poImages[$(".po-picture").data("gallery")].length-1):po.open($(".po-picture").data("gallery"),$(".po-picture").data("index")-1)}next(){$(".po-picture").data("index")>=this.poImages[$(".po-picture").data("gallery")].length-
1?po.open($(".po-picture").data("gallery"),0):po.open($(".po-picture").data("gallery"),$(".po-picture").data("index")+1)}close(){this.angle=0;$("body>*:not(.po-frame)").removeClass("po-blured");$(".po-frame").animate({opacity:0},600,function(){$(".po-frame").css("z-index","-1000")})}info(){this.grabDetails();console.log("po.viewer");console.log(`> version: ${this.version}`);console.log(1>this.pageRatio?"> landscape mode":"> portrait mode");console.log(`> actual viewport width: ${this.poPage.width}`);
console.log(`> actual viewport height: ${this.poPage.height}`);console.log(`> opened image width: ${this.poPicture.width}`);console.log(`> opened image height: ${this.poPicture.height}`);console.log(`> rotation: ${this.angle}`)}resizer(e,b){switch(1>e.ratio){default:$(".po-picture").data("rotated")?($(".po-picture").css("height",.9*e.height),$(".po-picture").css("width",.9*e.height/b.ratio),$(".po-picture").data("rotated",!1)):($(".po-picture").css("width",.9*e.height),$(".po-picture").css("height",
.9*e.height*b.ratio),$(".po-picture").data("rotated",!0));break;case !1:$(".po-picture").data("rotated")?($(".po-picture").css("width",.9*e.width),$(".po-picture").css("height",.9*e.width*b.ratio),$(".po-picture").data("rotated",!1)):($(".po-picture").css("height",.9*e.width),$(".po-picture").css("width",.9*e.width/b.ratio),$(".po-picture").data("rotated",!0))}}clear(){$(".po-gallery").empty();$(".po-gallery").append(`<div class="ui middle aligned ${this.centeredThumbnails} stackable grid"></div>`)}grabDetails(){this.poPicture=
{height:$(".po-picture").height(),width:$(".po-picture").width(),ratio:$(".po-picture").height()/$(".po-picture").width()};this.poPage={height:$(window).height(),width:$(window).width(),ratio:$(window).height()/$(window).width()}}error(e="Unknown error happend."){this.clear();console.error(e);console.log(" >> Please check the documentation at https://github.com/szndcs/po.viewer");throw Error("po.viewer CANNOT START");}};
//# sourceMappingURL=./po.min.js.map